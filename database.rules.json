{
  "rules": {
    "games": {
      "$gameId": {
        ".read": true,
        ".write": true,
        "teams": {
          "$teamId": {
            ".read": true,
            ".write": true
          }
        },
        "players": {
          "$playerId": {
            ".read": true,
            ".write": true
          }
        },
        "words": {
          "$wordId": {
            ".read": true,
            ".write": "root.child('games').child($gameId).child('state').val() == 'lobby' || data.exists()"
          }
        }
      }
    },
    "game_codes": {
      ".read": true,
      ".write": true,
      ".indexOn": [".value"]
    }
  }
} 